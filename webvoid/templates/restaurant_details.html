{% extends 'base_templates/base.html' %}

<title>{% block title %} {{restaurant.name}} {% endblock title %}</title>

{% block favicon %}
{% endblock favicon %}

{% block css %}
{% load static %}
<link rel="stylesheet" type="text/css" href="{% static 'css/restaurant_details.css' %}">
<style>
    #map {
        width: 100%;
        height: 500px;
        border: 0;
    }

    .rating-star {
        color: green;
        /* Default color for stars */
        font-size: 20px;
        /* Adjust as needed */
    }
</style>

{% endblock css %}


{% block body %}
<div class="container-fluid">
    <div class="main_heading">
        <div class="left-content">
            <h1>{{ restaurant.name }} </h1><span> {{ restaurant.address }}</span>
            <!-- Website Stylings -->
            <div class="website-div">
                <i class="fa-solid fa-laptop-code" id="website"></i><a href="{{ restaurant.website_link }}"
                    target="_blank">Website</a>
            </div>
        </div>
        <div class="right-content">
            <!-- <p>Opening Hours :</p> <span> {{ restaurant.opening_hours }}</span> -->
        </div>
    </div>
    <div class="sub_heading">
        <!-- Mobile Phone /Calling Section -->
        <div class="info-block">
            <i class="fa-sharp fa-solid fa-phone" style="color: #1b0aff;" id="mobile_number"></i>
            <a href="tel:+91{{ restaurant.contact_number }}" target="_blank"
                id="mobile_number_a">{{restaurant.contact_number }}</a>
        </div>
        <!-- Map Section -->
        <div class="info-block">

            <i class="fa-regular fa-map" style="color: #ff0000;" id="map_section"></i>
            <a href="{{ restaurant.google_map_link }}" target="_blank" id="map_section_a">Show Directions In Maps</a>
        </div>
        <!-- Restaurant type Section -->
        <div class="info-block">
            <p id="restaurant_type">| {{ restaurant.restaurant_style }} Restaurant</p>
        </div>
        <!-- Opening Hours Section -->
        <div class="info-block">
            <p id="opening_hours">| Opening Hours :</p>
            <span>{{ restaurant.opening_hours }}</span>
        </div>
    </div>


    <!-- Images Container -->
    <div class="images-container">
        <!-- Main Image (First Image) -->
        <div class="main-image">
            {% if restaurant.images.all %}
            <img src="{{ restaurant.images.all.0.image.url }}" alt="{{ restaurant.name }}">
            {% else %}
            <p>No images available</p>
            {% endif %}
        </div>

        <!-- Side Images (Next Two Images) -->
        <div class="side-images">
            {% for image in restaurant.images.all %}
            {% if forloop.counter > 1 and forloop.counter <= 3 %} <img src="{{ image.image.url }}"
                alt="{{ restaurant.name }}">
                {% endif %}
                {% endfor %}
        </div>
    </div>
    <!-- <a href="{% url 'restaurant_list' %}" class="back-to-hotels-btn">Back to Hotels</a> -->
    <!-- Example: Button to Get Directions -->
    <div class="directions-reserve-table">
        <a href="{{ restaurant.google_map_link }}" target="_blank" id="get-directions-button">
            <i class="fa-solid fa-route" style="color: #ff0000;"></i> Get Directions
        </a>
        <a class="reserve-button" href="#">Reserve Table</a>
    </div>
    
    

    <!-- Menu section starts from here -->
    <div class="container-fluid">
        <h2>Displaying Menu</h2>
        <div class="row">
            {% for menu in menus %}
            <div class="col-md-4 col-sm-6 col-xs-12 mb-4">
                <div class="card">
                    <div class="card-img-container">
                        <img src="{{ menu.menu_image.url }}" class="card-img-top fixed-size-image"
                            alt="{{ menu.name }}">
                    </div>
                    <div class="card-body">
                        <h5 class="card-title fw-bold" style="color: #4C3BCF;">{{ menu.menu_name }}</h5>
                        <p class="card-text"><strong>Amount: &#8377;</strong> {{ menu.amount }}</p>
                        <p><strong>Ratings:</strong>
                            {% if menu.ratings == 1 %}
                            <span class="rating-star">&#9733;&#9734;&#9734;&#9734;&#9734;</span>
                            {% elif menu.ratings == 2 %}
                            <span class="rating-star">&#9733;&#9733;&#9734;&#9734;&#9734;</span>
                            {% elif menu.ratings == 3 %}
                            <span class="rating-star">&#9733;&#9733;&#9733;&#9734;&#9734;</span>
                            {% elif menu.ratings == 4 %}
                            <span class="rating-star">&#9733;&#9733;&#9733;&#9733;&#9734;</span>
                            {% elif menu.ratings == 5 %}
                            <span class="rating-star">&#9733;&#9733;&#9733;&#9733;&#9733;</span>
                            {% endif %}
                        </p>
                        <a href="{% url 'menu_detail' menu.id %}" class="btn btn-primary mt-auto">View Details</a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>


    <h1>Embedded Map Example</h1>
    {% if restaurant.latitude and restaurant.longitude %}
    <iframe
        width="600"
        height="450"
        frameborder="0"
        style="border:0;"
        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d126593.67234764625!2d{{ restaurant.longitude }}!3d{{ restaurant.latitude }}!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2z{{ restaurant.latitude }}!3m2!1d{{ restaurant.longitude }}!2d{{ restaurant.latitude }}!5e0!3m2!1sen!2sus!4v1642112345725!5m2!1sen!2sus"
        allowfullscreen>
    </iframe>
{% else %}
    <p>No location information available.</p>
{% endif %}



    <iframe
        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d31549764.003339864!2d71.93289533813757!3d14.895830892555399!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x30635ff06b92b791%3A0xd78c4fa1854213a6!2sIndia!5e0!3m2!1sen!2sin!4v1718874942902!5m2!1sen!2sin"
        width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy"
        referrerpolicy="no-referrer-when-downgrade"></iframe>

    {% endblock body %}



    <!-- Adding External Script files -->
    {% block script %}
    <script src="{% static 'js/location.js' %}"></script>
    <script>
                    window.onload = fetchUserLocation;

    </script>
    {% endblock script %}